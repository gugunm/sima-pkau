"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[545],{1545:function(a,t,e){e.d(t,{Z:function(){return Sa}});var i=e(3396),s=e(7139);const l={key:0,class:"h4 mb-4"},n={key:1,class:"h4 mb-4"},o=(0,i.Uk)("ID "),d={class:"col-sm-2"},p=(0,i.Uk)("Nama KAP "),r=(0,i._)("span",{class:"text-red-500"},"*",-1),m={class:"col-sm-9"},u={key:0},c={key:1},h=(0,i.Uk)("Unit Kerja PJ KAP "),k=(0,i._)("span",{class:"text-red-500"},"*",-1),f={class:"col-sm-2"},w=(0,i.Uk)("Tahun "),b=(0,i._)("span",{class:"text-red-500"},"*",-1),g={class:"col-sm-2"},P=(0,i.Uk)("Unit Kerja"),_=(0,i._)("span",{class:"text-red-500"},"*",-1),K={class:"col-sm-4"},U=(0,i.Uk)("Nama PKAU"),y=(0,i._)("span",{class:"text-red-500"},"*",-1),x={class:"col-sm-9"},D=(0,i.Uk)("Bagian/Bidang"),v=(0,i._)("span",{class:"text-red-500"},"*",-1),W={class:"col-sm-9"},R=(0,i.Uk)("Hasil Yang Diharapkan"),B=(0,i._)("span",{class:"text-red-500"},"*",-1),S={class:"col-sm-9"},V=(0,i._)("p",{class:"text-sm mt-2 text-red-500"}," note : pisahkan informasi hasil yang diharapkan dengan titik koma ';' ",-1),j=(0,i.Uk)("HP "),T=(0,i._)("span",{class:"text-red-500"},"*",-1),A={class:"col-sm-2"},C=(0,i.Uk)("Dana "),$=(0,i._)("span",{class:"text-red-500"},"*",-1),O={class:"col-sm-4"},E=(0,i.Uk)("Sumber Dana "),F=(0,i._)("span",{class:"text-red-500"},"*",-1),L={class:"col-sm-4"},q=(0,i.Uk)("RMP"),I=(0,i._)("span",{class:"text-red-500"},"*",-1),Y={class:"col-sm-4"},M=(0,i.Uk)("RPL Triwulan "),z=(0,i._)("span",{class:"text-red-500"},"*",-1),N={class:"col-sm-4"},H={class:"col-sm-12"},J={key:0},Z=(0,i.Uk)(" Simpan PKAU "),G={key:1},Q={key:0,class:"flex flex-col mt-4"},X={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},aa={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},ta={class:"shadow-sm overflow-hidden border-b border-gray-200 sm:rounded-lg"},ea={class:"min-w-full divide-y divide-gray-200"},ia=(0,i._)("thead",{class:"bg-gray-50"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nama PKAU "),(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Unit Kerja "),(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Bidang Was "),(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," TW Pelaporan "),(0,i._)("th",{scope:"col",class:"relative px-6 py-3"},[(0,i._)("span",{class:"sr-only"},"Hapus")])])],-1),sa={class:"bg-white divide-y divide-gray-200"},la={class:"px-6 py-4"},na={class:"text-sm text-gray-900"},oa={class:"px-6 py-4 whitespace-nowrap"},da={class:"text-sm text-gray-900"},pa={class:"px-6 py-4"},ra={class:"text-sm text-gray-900"},ma={class:"px-6 py-4 whitespace-nowrap"},ua={class:"text-sm text-gray-900"},ca={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ha=["onClick"],ka=(0,i.Uk)(" Batal "),fa=(0,i.Uk)(" Reset "),wa=(0,i._)("p",null,"Simpan",-1),ba={key:0},ga=(0,i.Uk)(" Ubah PKAU "),Pa={key:1};function _a(a,t,e,_a,Ka,Ua){const ya=(0,i.up)("Loading"),xa=(0,i.up)("CFormLabel"),Da=(0,i.up)("CFormInput"),va=(0,i.up)("CRow"),Wa=(0,i.up)("VueMultiselect"),Ra=(0,i.up)("CFormTextarea"),Ba=(0,i.up)("CSpinner"),Sa=(0,i.up)("CButton"),Va=(0,i.up)("CCol"),ja=(0,i.up)("CForm"),Ta=(0,i.up)("CCardBody"),Aa=(0,i.up)("CCard");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(ya,{active:Ka.loading,"onUpdate:active":t[0]||(t[0]=a=>Ka.loading=a),"is-full-page":!0},null,8,["active"]),(0,i.Wm)(Aa,{class:"mb-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ta,{class:"p-4"},{default:(0,i.w5)((()=>["create"==e.mode?((0,i.wg)(),(0,i.iD)("h4",l,"Tambah PKAU")):"update"==e.mode?((0,i.wg)(),(0,i.iD)("h4",n,"Edit PKAU")):(0,i.kq)("",!0),"update"==e.mode?((0,i.wg)(),(0,i.j4)(va,{key:2,class:"mb-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[o])),_:1}),(0,i._)("div",d,[(0,i.Wm)(Da,{modelValue:Ka.editData.idPkpt,"onUpdate:modelValue":t[1]||(t[1]=a=>Ka.editData.idPkpt=a),readonly:""},null,8,["modelValue"])])])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(ja,null,{default:(0,i.w5)((()=>[(0,i.Wm)(va,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"nama-kap",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[p,r])),_:1}),(0,i._)("div",m,["update"==e.mode?((0,i.wg)(),(0,i.iD)("div",u,[Ka.selectedKap?((0,i.wg)(),(0,i.j4)(Da,{key:0,type:"text",value:Ka.selectedKap.namaKap,readonly:""},null,8,["value"])):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",c,[Ua.isReadOnlyKap?((0,i.wg)(),(0,i.j4)(Da,{key:0,type:"text",value:Ka.selectedKap.namaKap,readonly:""},null,8,["value"])):((0,i.wg)(),(0,i.j4)(Wa,{key:1,id:"nama-kap",placeholder:"Pilih KAP",label:"namaKap",modelValue:Ka.selectedKap,"onUpdate:modelValue":t[2]||(t[2]=a=>Ka.selectedKap=a),options:Ka.optionsKap,"track-by":"namaKap",deselectLabel:"",selectLabel:"","custom-label":Ua.viewSelectSearchKap},null,8,["modelValue","options","custom-label"]))]))])])),_:1}),(0,i.Wm)(va,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"pj-kap",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[h,k])),_:1}),(0,i._)("div",f,[(0,i.Wm)(Da,{type:"text",id:"pj-kap",modelValue:Ka.pjKap,"onUpdate:modelValue":t[3]||(t[3]=a=>Ka.pjKap=a),readonly:"",placeholder:"sesuai kap"},null,8,["modelValue"])])])),_:1}),(0,i._)("div",null,[(0,i.Wm)(va,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[w,b])),_:1}),(0,i._)("div",g,[(0,i.Wm)(Da,{type:"number",id:"tahun",modelValue:Ka.form.tahun,"onUpdate:modelValue":t[4]||(t[4]=a=>Ka.form.tahun=a),readonly:"",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(va,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"unit-kerja",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[P,_])),_:1}),(0,i._)("div",K,[(0,i.Wm)(Wa,{id:"unit-kontributor",modelValue:Ka.selectedUnitPkpt,"onUpdate:modelValue":t[5]||(t[5]=a=>Ka.selectedUnitPkpt=a),options:Ka.optionsUnitPkpt,placeholder:"Pilih Unit Kerja",label:"namaUnitKontributor","track-by":"namaUnitKontributor","custom-label":Ua.viewSelectUnitPkpt},null,8,["modelValue","options","custom-label"])])])),_:1}),(0,i.Wm)(va,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"nama-pkpt",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[U,y])),_:1}),(0,i._)("div",x,[(0,i.Wm)(Ra,{id:"nama-pkpt",modelValue:Ka.form.namaPkpt,"onUpdate:modelValue":t[6]||(t[6]=a=>Ka.form.namaPkpt=a),rows:"3",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(va,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"bidwas",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[D,v])),_:1}),(0,i._)("div",W,[(0,i.Wm)(Wa,{id:"bidwas",modelValue:Ka.selectedBidwas,"onUpdate:modelValue":t[7]||(t[7]=a=>Ka.selectedBidwas=a),options:Ka.optionsBidwas,placeholder:"Pilih Bidang/Bagian",label:"namaBidwas","track-by":"namaBidwas"},null,8,["modelValue","options"])])])),_:1}),(0,i.Wm)(va,{class:"mb-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"info-pkpt",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[R,B])),_:1}),(0,i._)("div",S,[(0,i.Wm)(Ra,{class:"text-sm",id:"info-pkpt",rows:"3",modelValue:Ka.form.infoYangDiharapkan,"onUpdate:modelValue":t[8]||(t[8]=a=>Ka.form.infoYangDiharapkan=a),required:""},null,8,["modelValue"]),V])])),_:1}),(0,i.Wm)(va,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"hp",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[j,T])),_:1}),(0,i._)("div",A,[(0,i.Wm)(Da,{type:"number",modelValue:Ka.form.hp,"onUpdate:modelValue":t[9]||(t[9]=a=>Ka.form.hp=a),id:"hp",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(va,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"dana",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[C,$])),_:1}),(0,i._)("div",O,[(0,i.Wm)(Da,{type:"number",modelValue:Ka.form.dana,"onUpdate:modelValue":t[10]||(t[10]=a=>Ka.form.dana=a),id:"dana",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(va,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"sumber-dana",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[E,F])),_:1}),(0,i._)("div",L,[(0,i.Wm)(Wa,{id:"sumber-dana",modelValue:Ka.selectedDana,"onUpdate:modelValue":t[11]||(t[11]=a=>Ka.selectedDana=a),options:Ka.optionsDana,placeholder:"Pilih Sumber",label:"deskripsi","track-by":"deskripsi"},null,8,["modelValue","options"])])])),_:1}),(0,i.Wm)(va,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"rmp",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[q,I])),_:1}),(0,i._)("div",Y,[(0,i.Wm)(Wa,{id:"rmp",modelValue:Ka.selectedRmp,"onUpdate:modelValue":t[12]||(t[12]=a=>Ka.selectedRmp=a),options:Ka.optionsRmp,placeholder:"Pilih RMP",label:"deskripsi","track-by":"deskripsi"},null,8,["modelValue","options"])])])),_:1}),(0,i.Wm)(va,{class:"mb-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(xa,{for:"tw",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[M,z])),_:1}),(0,i._)("div",N,[(0,i.Wm)(Wa,{id:"tw",modelValue:Ka.form.triwulan,"onUpdate:modelValue":t[13]||(t[13]=a=>Ka.form.triwulan=a),options:Ka.optionsTriwulan,multiple:!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih Triwulan"},null,8,["modelValue","options"])])])),_:1}),"create"==e.mode?((0,i.wg)(),(0,i.j4)(va,{key:0,class:"mb-4 mt-4 text-center"},{default:(0,i.w5)((()=>[(0,i._)("div",H,[(0,i.Wm)(Sa,{type:"button",class:"px-4 text-white",color:"success",size:"sm",onClick:Ua.submit},{default:(0,i.w5)((()=>[Ka.loading?((0,i.wg)(),(0,i.iD)("div",J,[(0,i.Wm)(Ba,{color:"white",size:"sm",class:"mr-2"}),Z])):((0,i.wg)(),(0,i.iD)("span",G,"Simpan PKAU"))])),_:1},8,["onClick"])])])),_:1})):(0,i.kq)("",!0)]),"update"!=e.mode?((0,i.wg)(),(0,i.iD)("div",Q,[(0,i._)("div",X,[(0,i._)("div",aa,[(0,i._)("div",ta,[(0,i._)("table",ea,[ia,(0,i._)("tbody",sa,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Ka.pkpts,((a,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:a.nama},[(0,i._)("td",la,[(0,i._)("div",na,(0,s.zw)(a.nama_pkpt),1)]),(0,i._)("td",oa,[(0,i._)("div",da,(0,s.zw)(a.nama_kontributor_pkpt),1)]),(0,i._)("td",pa,[(0,i._)("div",ra,(0,s.zw)(a.nama_bidwas),1)]),(0,i._)("td",ma,[(0,i._)("div",ua,(0,s.zw)(a.triwulan),1)]),(0,i._)("td",ca,[(0,i._)("button",{class:"text-red-600 hover:text-red-900",onClick:e=>Ua.deletePkpt(t,a.id)}," Hapus ",8,ha)])])))),128))])])])])])])):(0,i.kq)("",!0),(0,i.Wm)(va,{class:"mt-8 view-form"},{default:(0,i.w5)((()=>[(0,i.Wm)(Va,{sm:"12",lg:"6",class:"mb-3"},{default:(0,i.w5)((()=>["view"!=e.mode?((0,i.wg)(),(0,i.j4)(Sa,{key:0,variant:"outline",color:"dark",onClick:t[14]||(t[14]=t=>a.$router.push("/pkau")),class:"px-5"},{default:(0,i.w5)((()=>[ka])),_:1})):(0,i.kq)("",!0)])),_:1}),"create"==e.mode||"update"==e.mode?((0,i.wg)(),(0,i.j4)(Va,{key:0,sm:"12",md:"6",class:"flex content-center justify-end pr-3 mb-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(Sa,{type:"button",class:"ml-1 px-5 text-white",color:"danger",onClick:Ua.reset},{default:(0,i.w5)((()=>[fa])),_:1},8,["onClick"]),"create"==e.mode?((0,i.wg)(),(0,i.j4)(Sa,{key:0,type:"button",color:"info",class:"px-5 ml-2 text-white",onClick:Ua.submitToBack},{default:(0,i.w5)((()=>[wa])),_:1},8,["onClick"])):((0,i.wg)(),(0,i.j4)(Sa,{key:1,type:"button",color:"info",class:"px-5 ml-2 text-white",onClick:Ua.submit},{default:(0,i.w5)((()=>[Ka.loading?((0,i.wg)(),(0,i.iD)("div",ba,[(0,i.Wm)(Ba,{color:"white",size:"sm",class:"mr-2"}),ga])):((0,i.wg)(),(0,i.iD)("p",Pa,"Ubah PKAU"))])),_:1},8,["onClick"]))])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})],64)}var Ka=e(6265),Ua=e.n(Ka),ya=e(6368),xa=e(6216);const Da=[{id:52,deskripsi:"APBN"},{id:53,deskripsi:"Mitra"},{id:1518,deskripsi:"ABT"},{id:1519,deskripsi:"PLN STAR-AF"},{id:1520,deskripsi:"MDTF"}],va=[{id:60,deskripsi:"Belum Ditentukan"},{id:1,deskripsi:"Januari"},{id:2,deskripsi:"Februari"},{id:3,deskripsi:"Maret"},{id:4,deskripsi:"April"},{id:5,deskripsi:"Mei"},{id:6,deskripsi:"Juni"},{id:7,deskripsi:"Juli"},{id:8,deskripsi:"Agustus"},{id:9,deskripsi:"September"},{id:10,deskripsi:"Oktober"},{id:11,deskripsi:"November"},{id:12,deskripsi:"Desember"}];var Wa={components:{VueMultiselect:ya.ZP,Loading:xa.Z},props:["mode","idPkpt"],data(){return{isSektorAppd:!1,idKap:null,pjKap:null,form:this.getEmptyForm(),submitted:!1,loading:!1,isOpenForm:!1,editData:{},selectedKap:null,optionsKap:[],selectedKontributor:null,optionsKontributor:[],selectedBidwas:null,optionsBidwas:[],selectedDana:null,optionsDana:Da,selectedRmp:null,optionsRmp:va,selectedUnitPkpt:null,optionsUnitPkpt:[],selectedRendPelaporan:null,optionsRendPelaporan:[],optionsTriwulan:[1,2,3,4],infoDiharapkanPkpt:null,pkpts:[]}},watch:{selectedKap:function(a){a&&(a.topiks.some((a=>28==a.idSektor))?(this.isSektorAppd=!0,this.form.idRendPelaporan=339):(this.isSektorAppd=!1,this.form.idRendPelaporan=0),this.idKap=a.idKap,this.pjKap=a.pjKap,this.getOptionsUnitPkpt())},selectedUnitPkpt:function(a){a&&(this.form.idTopikOrKontributor=a.idKontributor,this.form.idUnitKerja=a.idUnitKontributor,this.form.namaUnitKerja=a.namaUnitKontributor,this.form.peranPkpt=a.peranPkpt,this.infoDiharapkanPkpt=a.infoKontributor,this.selectedBidwas=null,this.optionsBidwas=[],this.loadBidwas(this.form.idUnitKerja),a.namaUnitKontributor.includes("PW")&&this.getOptionsRendPelaporan())},selectedRendPelaporan:function(a){a&&(this.form.idRendPelaporan=a.idUnitKontributor)},selectedBidwas:function(a){a&&(this.form.idBidwas=a.id,this.form.namaBidwasPkpt=a.namaBidwas)},selectedDana:function(a){a&&(this.form.idSumberDana=a.id,this.form.namaSumberDana=a.deskripsi)},selectedRmp:function(a){a&&(this.form.idRmp=a.id,this.form.namaRmp=a.deskripsi)}},computed:{isReadOnlyKap:function(){return this.pkpts.length>0},isUnitPkptPerwakilan:function(){return!!this.selectedUnitPkpt&&!!this.selectedUnitPkpt.namaUnitKontributor.includes("PW")}},async mounted(){this.form.tahun=localStorage.tahun,this.optionsKap=await this.$store.dispatch("loadListKap"),"update"==this.mode&&(this.loading=!0,await this.loadPkptById(),this.selectedKap=this.optionsKap.filter((a=>a.idKap==this.idKap))[0],await this.getOptionsUnitPkpt(),this.selectedUnitPkpt=this.optionsUnitPkpt.filter((a=>a.idUnitKontributor==this.form.idUnitKerja))[0],this.selectedUnitPkpt.namaUnitKontributor.includes("PW")&&(await this.getOptionsRendPelaporan(),this.selectedRendPelaporan=this.optionsRendPelaporan.filter((a=>a.idUnitKontributor==this.form.idRendPelaporan))[0]),await this.loadBidwas(this.form.idUnitKerja),this.selectedBidwas=this.optionsBidwas.filter((a=>a.id==this.form.idBidwas))[0],this.selectedDana=this.optionsDana.filter((a=>a.id==this.form.idSumberDana))[0],this.selectedRmp=this.optionsRmp.filter((a=>a.id==this.form.idRmp))[0])},methods:{async getOptionsUnitPkpt(){let a=await this.$store.dispatch("loadSelectUnitPkpt",{idKap:this.idKap});const t=[];a.forEach((a=>{t.push(...a.kontributors)})),this.optionsUnitPkpt=t},async getOptionsRendPelaporan(){let a=await this.$store.dispatch("loadSelectUnitPkpt",{idKap:this.idKap});const t=[];a.forEach((a=>{t.push(...a.kontributors)})),this.optionsRendPelaporan=t.filter((a=>!a.namaUnitKontributor.includes("PW")))},async loadBidwas(a){this.optionsBidwas=await this.$store.dispatch("loadBidwas",{idUnit:a})},viewSelectSearch({alias:a,deskripsi:t}){return`${a} - ${t}`},viewSelectUnitPkpt({namaUnitKontributor:a,peranPkpt:t}){return`${a} - ${1==t?"Koordinator Topik":"Kontributor Topik"}`},viewSelectSearchKap({namaKap:a,pjKap:t}){return`${a} - ${t}`},async deletePkpt(a,t){try{const e=await Ua()({method:"DELETE",baseURL:this.$apiAddress,url:`/api/pkpt/${t}`,params:{token:localStorage.getItem("token"),nip:localStorage.getItem("nip")}});200==e.status&&(this.toastSuccess("Berhasil menghapus data"),this.pkpts.splice(a))}catch(e){this.toastError(e.message)}},submitToBack(){this.pkpts.length>0?setTimeout((()=>{this.$router.push("/pkau"),this.toastSuccess("Berhasil membuat PKAU")}),500):this.toastWarning("Selesaikan dahulu pembuatan PKAU")},async submit(){const a=this.$func.isNullOfObjElement(this.form);if(a){this.submitted=!0;const a=this.appendToFormData();try{if("create"==this.mode){this.loading=!0;const t=await Ua()({method:"POST",baseURL:this.$apiAddress,url:"/api/pkpt",data:a,params:{token:localStorage.getItem("token")}});200!=t.status?this.error="Gagal menyimpan data":(this.loading=!1,this.toastSuccess("Berhasil menyimpan data"));const e=await t.data;this.pkpts.push(e),this.reset(),this.form.tahun=localStorage.tahun}else if("update"==this.mode){this.loading=!0;const t=await Ua()({method:"POST",baseURL:this.$apiAddress,url:`/api/pkpt/${this.idPkpt}`,data:a,params:{token:localStorage.getItem("token")}});200!=t.status?this.error="Gagal merubah data":(this.loading=!1,this.$router.push("/pkau"),this.toastSuccess("Berhasil merubah data"))}}catch(t){setTimeout((()=>{this.loading=!1,this.toastError("Terjadi kesalahan saat submit data")}),500)}}else this.toastWarning("Lengkapi data sebelum submit!")},reset(){this.form=this.getEmptyForm(),this.submitted=!1,this.selectedUnitPkpt=null,this.infoDiharapkanPkpt=null,this.isReadOnlyKap||(this.pjKap=null,this.selectedKap=null),this.selectedKontributor=null,this.selectedBidwas=null,this.selectedDana=null,this.selectedRmp=null},getEmptyForm(){return{tahun:null,idTopikOrKontributor:null,peranPkpt:null,idUnitKerja:null,namaPkpt:null,idBidwas:null,idRendPelaporan:0,hp:null,dana:null,idSumberDana:null,idRmp:null,namaRmp:null,triwulan:[],namaBidwasPkpt:null,namaUnitKerja:null,namaSumberDana:null,infoYangDiharapkan:null}},appendToFormData(){const a=new FormData;return"update"==this.mode?a.append("_method","PUT"):(a.append("idKap",this.idKap),a.append("tahunPkpt",this.form.tahun)),a.append("idRendalPelaporan",this.form.idRendPelaporan),a.append("idUnitKerja",this.form.idUnitKerja),a.append("namaUnitKerja",this.form.namaUnitKerja),a.append("namaPkpt",this.form.namaPkpt),a.append("idBidwas",this.form.idBidwas),a.append("namaBidwasPkpt",this.form.namaBidwasPkpt),a.append("triwulan",this.form.triwulan),a.append("hp",this.form.hp),a.append("dana",this.form.dana),a.append("idSumberDana",this.form.idSumberDana),a.append("namaSumberDana",this.form.namaSumberDana),a.append("idRmp",this.form.idRmp),a.append("namaRmp",this.form.namaRmp),a.append("peranPkpt",this.form.peranPkpt),a.append("idTopikOrKontributor",this.form.idTopikOrKontributor),a.append("infoYangDiharapkan",this.form.infoYangDiharapkan),a.append("nip",localStorage.getItem("nip")),a},async loadPkptById(){try{const a=await Ua()({method:"GET",baseURL:this.$apiAddress,url:`/api/pkpt/${this.idPkpt}`,params:{token:localStorage.getItem("token")}});this.editData=await a.data,200==a.status&&(this.idKap=this.editData.idKap,this.form={tahun:this.editData.tahunPkpt,idTopikOrKontributor:0==this.editData.peranPkpt?this.editData.idKontributor:this.editData.idTopik,peranPkpt:this.editData.peranPkpt,idUnitKerja:this.editData.idUnitKerja,namaPkpt:this.editData.namaPkpt,idBidwas:this.editData.idBidwas,hp:this.editData.hp,dana:this.editData.dana,idSumberDana:this.editData.idSumberDana,idRmp:this.editData.idRmp,triwulan:this.editData.triwulan,idRendPelaporan:this.editData.idRendalPelaporan,infoYangDiharapkan:this.editData.infoYangDiharapkan}),this.loading=!1}catch(a){this.toastError(a.message),this.loading=!1}},toastSuccess(a){this.$toast.open({message:a,type:"success",position:"top-right",duration:3e3})},toastError(a){this.$toast.open({message:a,type:"error",position:"top-right",duration:3e3})},toastWarning(a){this.$toast.open({message:a,type:"warning",position:"top-right",duration:3e3})}}},Ra=e(89);const Ba=(0,Ra.Z)(Wa,[["render",_a]]);var Sa=Ba}}]);
//# sourceMappingURL=545.34ee1596.js.map